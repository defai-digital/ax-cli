{
  "version": 1,
  "created_at": "2025-12-01T01:45:24.387Z",
  "updated_at": "2025-12-05T18:37:11.948Z",
  "project_root": "/Users/akiralam/code/ax-cli",
  "content_hash": "sha256:c309a5ca5fc17910fd524d6cebbfa2d299ceb2c102be7407386dbdaa015c58e5",
  "source": {
    "directories": [
      {
        "path": "src",
        "max_depth": 3
      },
      {
        "path": "packages",
        "max_depth": 2
      }
    ],
    "files": [
      "README.md",
      "readme.md",
      "package.json",
      "tsconfig.json",
      ".ax-cli/CUSTOM.md"
    ],
    "ignore": [
      "node_modules",
      "dist",
      "build",
      ".git",
      ".next",
      ".nuxt",
      "coverage",
      ".cache",
      ".turbo",
      ".vercel",
      "__pycache__",
      ".pytest_cache",
      "target",
      "vendor",
      "*.log",
      "*.lock",
      ".DS_Store"
    ]
  },
  "context": {
    "formatted": "# Project Context\n\n\n## Architecture Patterns\n- **Project Type**: cli\n- **Primary Language**: TypeScript\n- **Tech Stack**: React, Vitest, Zod, Commander, Ink, ESM, TypeScript\n- **Package Manager**: pnpm\n- **Entry Point**: dist/index.js\n- **Module System**: ESM\n- **Test Framework**: vitest\n- **Validation**: zod\n- **Linter**: eslint\n- **Key Directories**: source: src, tests: tests\n\n\n## Directory Structure\n```\nsrc/\n├── agent/\n│   ├── core/\n│   │   ├── index.ts\n│   │   └── types.ts\n│   ├── execution/\n│   │   ├── index.ts\n│   │   └── tool-executor.ts\n│   ├── planning/\n│   │   ├── index.ts\n│   │   └── plan-executor.ts\n│   ├── specialized/\n│   │   ├── analysis-agent.ts\n│   │   ├── debug-agent.ts\n│   │   ├── documentation-agent.ts\n│   │   ├── index.ts\n│   │   ├── performance-agent.ts\n│   │   ├── refactoring-agent.ts\n│   │   └── testing-agent.ts\n│   ├── streaming/\n│   │   ├── index.ts\n│   │   └── stream-handler.ts\n│   ├── context-manager.ts\n│   ├── dependency-resolver.ts\n│   ├── index.ts\n│   ├── llm-agent.ts\n│   ├── loop-detector.ts\n│   ├── progress-tracker.ts\n│   ├── status-reporter.ts\n│   ├── subagent-orchestrator.ts\n│   ├── subagent-types.ts\n│   └── subagent.ts\n├── analyzers/\n│   ├── architecture/\n│   │   ├── anti-pattern-detectors/\n│   │   ├── pattern-detectors/\n│   │   ├── architecture-analyzer.ts\n│   │   ├── index.ts\n│   │   └── project-structure-scanner.ts\n│   ├── ast/\n│   │   ├── index.ts\n│   │   ├── language-parser.ts\n│   │   ├── multi-language-parser.ts\n│   │   ├── node-helpers.ts\n│   │   ├── parser.ts\n│   │   ├── traverser.ts\n│   │   ├── tree-sitter-parser.ts\n│   │   └── types.ts\n│   ├── best-practices/\n│   │   ├── rules/\n│   │   ├── base-rule.ts\n│   │   ├── best-practice-validator.ts\n│   │   ├── index.ts\n│   │   └── types.ts\n│   ├── cache/\n│   │   └── analysis-cache.ts\n│   ├── code-smells/\n│   │   ├── detectors/\n│   │   ├── base-smell-detector.ts\n│   │   ├── code-smell-analyzer.ts\n│   │   ├── index.ts\n│   │   └── types.ts\n│   ├── dependency/\n│   │   ├── circular-detector.ts\n│   │   ├── coupling-calculator.ts\n│   │   ├── dependency-analyzer.ts\n│   │   ├── dependency-graph.ts\n│   │   ├── index.ts\n│   │   └── types.ts\n│   ├── git/\n│   │   ├── churn-calculator.ts\n│   │   ├── git-analyzer.ts\n│   │   ├── hotspot-detector.ts\n│   │   ├── index.ts\n│   │   └── types.ts\n│   ├── metrics/\n│   │   ├── halstead-calculator.ts\n│   │   ├── index.ts\n│   │   ├── maintainability-calculator.ts\n│   │   ├── metrics-analyzer.ts\n│   │   └── types.ts\n│   ├── security/\n│   │   ├── detectors/\n│   │   ├── base-detector.ts\n│   │   ├── index.ts\n│   │   ├── security-analyzer.ts\n│   │   └── types.ts\n│   └── errors.ts\n├── checkpoint/\n│   ├── index.ts\n│   ├── manager.ts\n│   ├── storage.ts\n│   └── types.ts\n├── commands/\n│   ├── init/\n│   │   └── wizard.ts\n│   ├── cache.ts\n│   ├── custom-commands.ts\n│   ├── doctor.ts\n│   ├── frontend.ts\n│   ├── init.ts\n│   ├── mcp-migrate.ts\n│   ├── mcp.ts\n│   ├── memory.ts\n│   ├── models.ts\n│   ├── plan.ts\n│   ├── rewind.ts\n│   ├── setup.ts\n│   ├── status.ts\n│   ├── templates.ts\n│   ├── update.ts\n│   ├── usage.ts\n│   └── vscode.ts\n├── hooks/\n│   ├── hook-runner.ts\n│   ├── index.ts\n│   ├── manager.ts\n│   └── types.ts\n├── ipc/\n│   ├── index.ts\n│   └── vscode-client.ts\n├── llm/\n│   ├── client.ts\n│   ├── tools.ts\n│   └── types.ts\n├── mcp/\n│   ├── automatosx-loader.ts\n│   ├── client-mutex-patch.ts\n│   ├── client-v2.ts\n│   ├── client.ts\n│   ├── config-detector.ts\n│   ├── config-migrator.ts\n│   ├── config.ts\n│   ├── content-length-transport.ts\n│   ├── error-formatter.ts\n│   ├── health.ts\n│   ├── index.ts\n│   ├── invariants.ts\n│   ├── mutex-safe.ts\n│   ├── mutex.ts\n│   ├── reconnection.ts\n│   ├── registry.ts\n│   ├── resources.ts\n│   ├── ssrf-protection.ts\n│   ├── templates.ts\n│   ├── transports.ts\n│   ├── type-safety.ts\n│   └── validation.ts\n├── memory/\n│   ├── context-generator.ts\n│   ├── context-injector.ts\n│   ├── context-store.ts\n│   ├── index.ts\n│   ├── schemas.ts\n│   ├── stats-collector.ts\n│   └── types.ts\n├── permissions/\n│   ├── index.ts\n│   └── permission-manager.ts\n├── planner/\n│   ├── prompts/\n│   │   └── planning-prompt.ts\n│   ├── dependency-resolver.ts\n│   ├── index.ts\n│   ├── plan-generator.ts\n│   ├── plan-storage.ts\n│   ├── task-planner.ts\n│   ├── token-estimator.ts\n│   └── types.ts\n├── schemas/\n│   ├── api-schemas.ts\n│   ├── confirmation-schemas.ts\n│   ├── index-unified.ts\n│   ├── index.ts\n│   ├── README.md\n│   ├── settings-schemas.ts\n│   ├── tool-schemas.ts\n│   └── yaml-schemas.ts\n├── sdk/\n│   ├── errors.ts\n│   ├── index.ts\n│   ├── progress-reporter.ts\n│   ├── README.md\n│   ├── testing.ts\n│   ├── tool-registry.ts\n│   ├── types.ts\n│   ├── unified-logger.ts\n│   └── version.ts\n├── tools/\n│   ├── analysis-tools/\n│   │   ├── architecture-tool.ts\n│   │   └── validation-tool.ts\n│   ├── analysis-tools.ts\n│   ├── ask-user.ts\n│   ├── bash-output.ts\n│   ├── bash.ts\n│   ├── confirmation-tool.ts\n│   ├── index.ts\n│   ├── registry.ts\n│   ├── search.ts\n│   ├── text-editor.ts\n│   └── todo-tool.ts\n├── types/\n│   ├── analysis.ts\n│   ├── index.ts\n│   ├── project-analysis.ts\n│   └── template.ts\n├── ui/\n│   ├── components/\n│   │   ├── api-key-input.tsx\n│   │   ├── chat-history.tsx\n│   │   ├── chat-input.tsx\n│   │   ├── chat-interface.tsx\n│   │   ├── collapsible-tool-result.tsx\n│   │   ├── command-suggestions.tsx\n│   │   ├── confirmation-dialog.tsx\n│   │   ├── context-breakdown.tsx\n│   │   ├── diff-renderer.tsx\n│   │   ├── index.ts\n│   │   ├── keyboard-help.tsx\n│   │   ├── keyboard-hints.tsx\n│   │   ├── loading-spinner.tsx\n│   │   ├── mcp-status.tsx\n│   │   ├── model-selection.tsx\n│   │   ├── phase-progress.tsx\n│   │   ├── question-dialog.tsx\n│   │   ├── quick-actions.tsx\n│   │   ├── reasoning-display.tsx\n│   │   ├── status-bar.tsx\n│   │   ├── subagent-monitor.tsx\n│   │   ├── toast-notification.tsx\n│   │   ├── tool-group-display.tsx\n│   │   ├── virtualized-chat-history.tsx\n│   │   └── welcome-panel.tsx\n│   ├── hooks/\n│   │   ├── use-chat-reducer.ts\n│   │   ├── use-enhanced-input.ts\n│   │   ├── use-input-handler.ts\n│   │   └── use-input-history.ts\n│   ├── shared/\n│   │   └── max-sized-box.tsx\n│   ├── utils/\n│   │   ├── bracketed-paste-handler.ts\n│   │   ├── change-summarizer.ts\n│   │   ├── code-colorizer.tsx\n│   │   ├── colors.ts\n│   │   ├── markdown-renderer.tsx\n│   │   ├── semantic-action-detector.ts\n│   │   └── tool-grouper.ts\n│   └── app.tsx\n├── utils/\n│   ├── analysis-logger.ts\n│   ├── api-error.ts\n│   ├── audit-logger.ts\n│   ├── auto-accept-logger.ts\n│   ├── automatosx-detector.ts\n│   ├── background-task-manager.ts\n│   ├── cache.ts\n│   ├── command-security.ts\n│   ├── config-loader.ts\n│   ├── confirmation-service.ts\n│   ├── console-messenger.ts\n│   ├── custom-instructions.ts\n│   ├── encryption.ts\n│   ├── enhanced-error-messages.ts\n│   ├── error-handler.ts\n│   ├── error-translator.ts\n│   ├── external-editor.ts\n│   ├── file-cache.ts\n│   ├── file-mentions.ts\n│   ├── history-manager.ts\n│   ├── history-migration.ts\n│   ├── index.ts\n│   ├── init-previewer.ts\n│   ├── init-validator.ts\n│   ├── input-sanitizer.ts\n│   ├── instruction-generator.ts\n│   ├── json-utils.ts\n│   ├── llm-optimized-instruction-generator.ts\n│   ├── message-optimizer.ts\n│   ├── onboarding-manager.ts\n│   └── ... (22 more)\n├── constants.ts\n└── index.ts\npackages/\n└── schemas/\n    ├── src/\n    ├── tests/\n    ├── .eslintrc.js\n    ├── package-lock.json\n    ├── package.json\n    ├── README.md\n    ├── tsconfig.json\n    └── vitest.config.ts\n```\n\n\n## Key Configuration\n\n### README.md\n\n```\n# AX CLI - Enterprise-Class CLI for Vibe Coding\n\n[![npm](https://img.shields.io/npm/dt/@defai.digital/ax-cli?style=flat-square&logo=npm&label=downloads)](https://npm-stat.com/charts.html?package=%40defai.digital%2Fax-cli)\n[![Tests](https://img.shields.io/badge/tests-2024%20passing-brightgreen?style=flat-square)](https://github.com/defai-digital/ax-cli/actions/workflows/test.yml)\n[![Coverage](https://img.shields.io/badge/coverage-98%2B%25-brightgreen?style=flat-square)](https://github.com/defai-d\n...\n```\n\n### readme.md\n\n```\n# AX CLI - Enterprise-Class CLI for Vibe Coding\n\n[![npm](https://img.shields.io/npm/dt/@defai.digital/ax-cli?style=flat-square&logo=npm&label=downloads)](https://npm-stat.com/charts.html?package=%40defai.digital%2Fax-cli)\n[![Tests](https://img.shields.io/badge/tests-2024%20passing-brightgreen?style=flat-square)](https://github.com/defai-digital/ax-cli/actions/workflows/test.yml)\n[![Coverage](https://img.shields.io/badge/coverage-98%2B%25-brightgreen?style=flat-square)](https://github.com/defai-d\n...\n```\n\n### package.json\n\n- **Name**: @defai.digital/ax-cli\n- **Version**: 3.12.8\n- **Description**: Enterprise-Class AI Command Line Interface - Primary support for GLM (General Language Model) with multi-provider AI orchestration powered by AutomatosX.\n- **Type**: module\n- **CLI**: Yes\n- **Dependencies**: @ax-cli/schemas, @clack/prompts, @modelcontextprotocol/sdk, @types/ws, axios, chalk, clipboardy, commander, dotenv, enquirer (+18 more)\n- **Dev Dependencies**: @types/fs-extra, @types/glob, @types/js-yaml, @types/marked-terminal, @types/node, @types/react, @typescript-eslint/eslint-plugin, @typescript-eslint/parser (+6 more)\n- **Scripts**: build, build:schemas, dev, start, pretest, lint\n\n### tsconfig.json\n\n- **Target**: ES2022\n- **Module**: ESNext\n- **Module Resolution**: Bundler\n- **Strict**: true\n- **Output**: ./dist\n\n### .ax-cli/CUSTOM.md\n\n# Custom Instructions for AX CLI\n\n**Project**: @defai.digital/ax-cli v3.12.8\n**Type**: cli\n**Language**: TypeScript\n**Stack**: React, Vitest, Zod, Commander, Ink, ESM, TypeScript\n\nGenerated: 11/30/2025, 8:45:19 PM\n\n## Project Context\n\n- **Entry Point**: `dist/index.js`\n- **Package Manager**: pnpm\n- **Module System**: ESM\n- **CLI Tool**: This is a command-line interface application\n\n## Code Conventions\n\n### TypeScript\n- Use explicit type annotations for function parameters and returns\n- Prefer `const` and `let` over `var`\n- Use strict mode (strict type checking enabled)\n- **CRITICAL**: Always use `.js` extension in import statements (ESM requirement)\n  - Example: `import { foo } from \"./bar.js\"` (NOT \"./bar\" or \"./bar.ts\")\n\n### ES Modules\n- Use `import/export` syntax (not `require/module.exports`)\n- Top-level await is supported\n\n### Validation\n- Use **zod** for runtime validation\n- Validate all external inputs (API requests, file reads, user input)\n- Use `.safeParse()` for error handlin\n[...truncated]\n\n\n## README Summary\n\n# AX CLI - Enterprise-Class CLI for Vibe Coding\n\n[![npm](https://img.shields.io/npm/dt/@defai.digital/ax-cli?style=flat-square&logo=npm&label=downloads)](https://npm-stat.com/charts.html?package=%40defai.digital%2Fax-cli)\n[![Tests](https://img.shields.io/badge/tests-2024%20passing-brightgreen?style=flat-square)](https://github.com/defai-digital/ax-cli/actions/workflows/test.yml)\n[![Coverage](https://img.shields.io/badge/coverage-98%2B%25-brightgreen?style=flat-square)](https://github.com/defai-digital/ax-cli)\n[![Node.js](https://img.shields.io/badge/node-%3E%3D24.0.0-blue?style=flat-square&logo=node.js)](https://nodejs.org/)\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg?style=flat-square)](https://opensource.org/licenses/MIT)\n\n<p align=\"center\">\n  <img src=\".github/assets/screenshot1.png\" alt=\"AX CLI Screenshot\" width=\"800\"/>\n</p>\n\n<p align=\"center\">\n  <strong>GLM-Optimized CLI • Enterprise Architecture • 98%+ Test Coverage</strong>\n</p>\n\n---\n\n## Quick Start\n\n```bash\n# Install globally\nnpm install -g @defai.digital/ax-cli\n\n# Configure (secure API key setup)\nax-cli setup\n\n# Initialize your project\nax-cli init\n\n# Start coding!\nax-cli\n```\n\n**That's it!** AX CLI is now ready to help you build, debug, and ship code faster.\n\n---\n\n## Table of Contents\n\n- [Features](#features)\n- [Installation](#installation)\n- [Configuration](#configuration)\n- [Usage](#usage)\n- [MCP Integration](#mcp-integration)\n- [Project Memory](#project-memory)\n- [Multi-Phase Planner](#multi-phase-task-planner)\n- [Security](#security)\n- [Architecture](#architecture)\n- [Changelog](#changelog)\n- [Recent Changes (v3.12.8)](#recent-changes-v3128)\n- [Documentation](#documentation)\n\n---\n\n## Features\n\n### Core Capabilities\n\n| Feature | Description |\n|---------|-------------|\n| **GLM-Optimized** | Primary support for Z.AI's GLM-4.6 with 200K context window |\n| **Multi-Phase Planner** | Intelligent task decomposition for complex requests |\n| **Session Continuity** | Directory-specific conversation history with `--continue` |\n| **MCP Integration** | Model Context Protocol with 12+ production-ready templates |\n| **Project Memory** | Intelligent context caching with 50% token savings |\n| **Smart Verbosity** | Three-level output control (Quiet → Concise → Verbose) |\n| **Auto-Update** | Automatic update check on startup with user confirmation |\n\n### AI Provider Support\n\n- **Z.AI GLM-4.6** (default) - 32K max tokens, optimized for complex code generation\n- **OpenAI** - GPT-4, GPT-3.5\n- **Anthropic** - Claude models\n- **Ollama** - Local models\n- **Custom endpoints** - Any OpenAI-compatible API\n\n> **Note**: For xAI Grok, use [grok-cli](https://github.com/superagent-ai/grok-cli). For Anthropic Claude, use [claude-code](https://claude.ai/code).\n\n### Security (Enterprise-Grade, FREE)\n\n| Protection | Severity | Description |\n|------------|----------|-------------|\n| API Key Encryption | - | AES-256-GCM encryption at rest |\n| Command Injection | CVSS 9.8 | Safe command execution with whitelisting |\n| Path Traversal | CVSS 8.6 | Prevent unauthorized file system access |\n| SSRF Prevention | CVSS 7.5 | Validate MCP transport URLs |\n| Input Sanitization | CVSS 7.0 | Comprehensive input validation |\n| Rate Limiting | - | Token bucket algorithm (100 req/min) |\n\n### Code Analysis Tools\n\n- **Dependency Analyzer** - Circular dependencies, coupling metrics\n- **Code Smell Detector** - 10+ anti-patterns detection\n- **Hotspot Analyzer** - Git history-based complexity analysis\n- **Security Scanner** - SQL injection, XSS, hardcoded secrets\n- **Multi-Language Support** - TypeScript, JavaScript, Python, Rust, Go, C, C++, Swift, HTML, CSS\n\n---\n\n## Installation\n\n### Supported Platforms\n\n| Platform | Versions | Architecture |\n|----------|----------|--------------|\n| **macOS** | 26+ | x64, ARM64 (Apple Silicon) |\n| **Windows** | 11+ | x64, ARM64 |\n| **Ubuntu** | 24.04+ | x64, ARM64 |\n\n### Prerequisites\n\n- Node.js 24.0.0 or higher\n- npm package manager\n\n### Install\n\n```bash\nnpm install -g @defai.digital/ax-cli\n```\n\n---\n\n## Configuration\n\n### Quick Setup (Recommended)\n\n```bash\nax\n\n[...truncated]",
    "token_estimate": 4385,
    "sections": {
      "structure": 2321,
      "readme": 1124,
      "config": 834,
      "patterns": 100
    }
  },
  "stats": {
    "last_cached_tokens": 43,
    "last_prompt_tokens": 58073,
    "total_tokens_saved": 4137872,
    "usage_count": 249,
    "last_used_at": "2025-12-05T18:37:11.948Z"
  }
}